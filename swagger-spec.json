{
  "openapi": "3.0.0",
  "paths": {
    "/notes": {
      "post": {
        "operationId": "NotesController_createNote",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateNoteDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Note created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NoteCreateResponseDto"
                }
              }
            }
          }
        },
        "security": [
          {
            "access-token": []
          }
        ],
        "summary": "Create a new note",
        "tags": ["notes"]
      },
      "get": {
        "operationId": "NotesController_listNotes",
        "parameters": [
          {
            "name": "page",
            "required": true,
            "in": "query",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "pageSize",
            "required": true,
            "in": "query",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Notes retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NoteListResponseDto"
                }
              }
            }
          }
        },
        "security": [
          {
            "access-token": []
          }
        ],
        "summary": "List notes with pagination",
        "tags": ["notes"]
      }
    },
    "/notes/{id}/analysis": {
      "get": {
        "operationId": "NotesController_getAnalysis",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Analysis result retrieved",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NoteAnalysisResponseDto"
                }
              }
            }
          }
        },
        "security": [
          {
            "access-token": []
          }
        ],
        "summary": "Get analysis result for a note",
        "tags": ["notes"]
      }
    },
    "/notes/{id}/todos": {
      "post": {
        "operationId": "NotesController_saveTodos",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SaveLearningTodosDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Todos saved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/TodoResponseDto"
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "access-token": []
          }
        ],
        "summary": "Save learning todos for a note",
        "tags": ["notes"]
      }
    },
    "/notes/{id}": {
      "patch": {
        "operationId": "NotesController_updateNote",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateNoteDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Note updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NoteEntityDto"
                }
              }
            }
          }
        },
        "security": [
          {
            "access-token": []
          }
        ],
        "summary": "Update a note",
        "tags": ["notes"]
      },
      "delete": {
        "operationId": "NotesController_deleteNote",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Note deleted successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SimpleMessageResponseDto"
                }
              }
            }
          }
        },
        "security": [
          {
            "access-token": []
          }
        ],
        "summary": "Delete a note",
        "tags": ["notes"]
      }
    },
    "/dashboard": {
      "get": {
        "operationId": "DashboardController_getDashboard",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Dashboard summary retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DashboardSummaryDto"
                }
              }
            }
          }
        },
        "security": [
          {
            "access-token": []
          }
        ],
        "summary": "Get dashboard summary for current user",
        "tags": ["dashboard"]
      }
    },
    "/dashboard/todos": {
      "get": {
        "operationId": "DashboardController_getTodos",
        "parameters": [],
        "responses": {
          "200": {
            "description": "List of todos",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/TodoResponseDto"
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "access-token": []
          }
        ],
        "summary": "Get all todos for current user",
        "tags": ["dashboard"]
      },
      "post": {
        "operationId": "DashboardController_createTodo",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateTodoDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Todo created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TodoResponseDto"
                }
              }
            }
          }
        },
        "security": [
          {
            "access-token": []
          }
        ],
        "summary": "Create a new todo",
        "tags": ["dashboard"]
      }
    },
    "/dashboard/todos/{id}": {
      "patch": {
        "operationId": "DashboardController_updateTodo",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateTodoDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Todo updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TodoResponseDto"
                }
              }
            }
          }
        },
        "security": [
          {
            "access-token": []
          }
        ],
        "summary": "Update a todo",
        "tags": ["dashboard"]
      },
      "delete": {
        "operationId": "DashboardController_deleteTodo",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Todo deleted successfully"
          }
        },
        "security": [
          {
            "access-token": []
          }
        ],
        "summary": "Delete a todo",
        "tags": ["dashboard"]
      }
    },
    "/auth/signup": {
      "post": {
        "operationId": "AuthController_signup",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SignupDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "User successfully signed up.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserResponseDto"
                }
              }
            }
          }
        },
        "summary": "Register a new user",
        "tags": ["auth"]
      }
    },
    "/auth/login": {
      "post": {
        "operationId": "AuthController_login",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/LoginDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "User successfully logged in.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LoginResponseDto"
                }
              }
            }
          }
        },
        "summary": "Log in with email and password",
        "tags": ["auth"]
      }
    },
    "/auth/me": {
      "get": {
        "operationId": "AuthController_getMe",
        "parameters": [],
        "responses": {
          "200": {
            "description": "JWT validation successful.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MeResponseDto"
                }
              }
            }
          }
        },
        "security": [
          {
            "access-token": []
          }
        ],
        "summary": "Get current user information (JWT test)",
        "tags": ["auth"]
      }
    }
  },
  "info": {
    "title": "LearnoteAI API",
    "description": "API documentation for LearnoteAI",
    "version": "1.0",
    "contact": {}
  },
  "tags": [
    {
      "name": "auth",
      "description": "Authentication and user registration"
    },
    {
      "name": "dashboard",
      "description": "Endpoints related to user dashboard"
    },
    {
      "name": "notes",
      "description": "Endpoints related to user notes"
    },
    {
      "name": "app",
      "description": "Application level endpoints"
    }
  ],
  "servers": [],
  "components": {
    "securitySchemes": {
      "access-token": {
        "scheme": "bearer",
        "bearerFormat": "JWT",
        "type": "http"
      }
    },
    "schemas": {
      "CreateNoteDto": {
        "type": "object",
        "properties": {
          "rawContent": {
            "type": "string",
            "example": "This is the raw content of the note.",
            "description": "The main content of the note"
          }
        },
        "required": ["rawContent"]
      },
      "NoteCreateResponseDto": {
        "type": "object",
        "properties": {
          "noteId": {
            "type": "number",
            "example": 1
          },
          "status": {
            "type": "string",
            "example": "ANALYZING"
          },
          "message": {
            "type": "string",
            "example": "Note creation started and analysis is in progress."
          },
          "rawContent": {
            "type": "string",
            "example": "Raw content of the note..."
          }
        },
        "required": ["noteId", "status", "message", "rawContent"]
      },
      "NoteListItemDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "number",
            "example": 1
          },
          "title": {
            "type": "string",
            "example": "Study Session: NestJS"
          },
          "createdAt": {
            "type": "string",
            "example": "2026-01-14"
          }
        },
        "required": ["id", "title", "createdAt"]
      },
      "NoteListResponseDto": {
        "type": "object",
        "properties": {
          "items": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/NoteListItemDto"
            }
          },
          "total": {
            "type": "number",
            "example": 10
          },
          "page": {
            "type": "number",
            "example": 1
          },
          "pageSize": {
            "type": "number",
            "example": 5
          }
        },
        "required": ["items", "total", "page", "pageSize"]
      },
      "NoteAnalysisResponseDto": {
        "type": "object",
        "properties": {
          "noteId": {
            "type": "number",
            "example": 1
          },
          "title": {
            "type": "string",
            "example": "Study Session: NestJS"
          },
          "status": {
            "type": "string",
            "example": "COMPLETED",
            "enum": ["ANALYZING", "COMPLETED"]
          },
          "message": {
            "type": "string",
            "example": "Analysis complete."
          },
          "rawContent": {
            "type": "string",
            "example": "Raw content of the note..."
          },
          "refinedNote": {
            "type": "string",
            "example": "Refined content of the note...",
            "nullable": true
          },
          "summary": {
            "type": "object",
            "properties": {
              "keywords": {
                "type": "array",
                "items": { "type": "string" }
              },
              "oneLineSummary": {
                "type": "string"
              }
            },
            "description": "Summary of the note"
          },
          "factChecks": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "id": { "type": "number" },
                "fact": { "type": "string" },
                "verified": { "type": "boolean" },
                "comment": { "type": "string" },
                "verdict": { "type": "string" },
                "originalText": { "type": "string" }
              }
            },
            "description": "List of fact checks"
          },
          "feedback": {
            "type": "object",
            "properties": {
              "type": { "type": "string" },
              "message": { "type": "string" },
              "longTermGoal": { "type": "string" },
              "shortTermGoal": { "type": "string" },
              "suggestions": { "type": "string" }
            },
            "description": "Feedback on the note"
          },
          "skillUpdateProposal": {
            "type": "object",
            "properties": {
              "stack": { "type": "string" },
              "category": { "type": "string" },
              "newSkills": {
                "type": "array",
                "items": { "type": "string" }
              },
              "skills": {
                "type": "array",
                "items": { "type": "string" }
              }
            },
            "description": "Proposed skill updates"
          },
          "suggestedTodos": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "reason": { "type": "string" },
                "content": { "type": "string" },
                "dueDate": { "type": "string" },
                "deadlineType": {
                  "type": "string",
                  "enum": ["SHORT_TERM", "LONG_TERM"]
                }
              }
            },
            "description": "Suggested todo items"
          }
        },
        "required": [
          "noteId",
          "status",
          "message",
          "rawContent",
          "refinedNote",
          "summary",
          "factChecks",
          "feedback",
          "skillUpdateProposal",
          "suggestedTodos"
        ]
      },
      "LearningTodoItemDto": {
        "type": "object",
        "properties": {
          "content": {
            "type": "string",
            "example": "Complete TypeScript tutorial",
            "description": "The task content"
          },
          "reason": {
            "type": "string",
            "example": "Identified as a gap in current knowledge",
            "description": "The reason for this todo item"
          },
          "dueDate": {
            "type": "string",
            "example": "2026-01-20",
            "description": "The target date for the task"
          },
          "deadlineType": {
            "type": "string",
            "enum": ["SHORT_TERM", "LONG_TERM"],
            "example": "SHORT_TERM",
            "description": "Deadline type (SHORT_TERM or LONG_TERM)"
          }
        },
        "required": ["content"]
      },
      "SaveLearningTodosDto": {
        "type": "object",
        "properties": {
          "todos": {
            "description": "A list of todos to be saved",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/LearningTodoItemDto"
            }
          }
        },
        "required": ["todos"]
      },
      "TodoResponseDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "number",
            "example": 1
          },
          "noteId": {
            "type": "number",
            "example": 10,
            "description": "ID of the related note",
            "nullable": true
          },
          "userId": {
            "type": "number",
            "example": 1
          },
          "content": {
            "type": "string",
            "example": "Review React Hooks"
          },
          "dueDate": {
            "type": "string",
            "example": "2026-01-20",
            "nullable": true
          },
          "status": {
            "type": "string",
            "example": "PENDING",
            "enum": ["PENDING", "COMPLETED"]
          },
          "reason": {
            "type": "string",
            "example": "Essential for state management",
            "nullable": true
          },
          "deadlineType": {
            "type": "string",
            "enum": ["SHORT_TERM", "LONG_TERM"],
            "example": "SHORT_TERM",
            "description": "Deadline type (SHORT_TERM or LONG_TERM)",
            "nullable": true
          },
          "createdAt": {
            "type": "string",
            "example": "2026-01-14T12:00:00Z"
          }
        },
        "required": [
          "id",
          "noteId",
          "userId",
          "content",
          "dueDate",
          "status",
          "reason",
          "deadlineType",
          "createdAt"
        ]
      },
      "UpdateNoteDto": {
        "type": "object",
        "properties": {
          "title": {
            "type": "string",
            "example": "Updated Note Title",
            "description": "The updated title of the note"
          },
          "refinedContent": {
            "type": "string",
            "example": "This is the updated refined content of the note.",
            "description": "The updated refined content of the note"
          }
        },
        "required": ["title", "refinedContent"]
      },
      "NoteEntityDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "number",
            "example": 1
          },
          "userId": {
            "type": "number",
            "example": 1
          },
          "title": {
            "type": "string",
            "example": "Study Session: NestJS"
          },
          "rawContent": {
            "type": "string",
            "example": "Raw content..."
          },
          "refinedContent": {
            "type": "object",
            "example": "Refined content...",
            "nullable": true
          },
          "createdAt": {
            "type": "string",
            "example": "2026-01-14T10:00:00Z"
          }
        },
        "required": ["id", "userId", "title", "rawContent", "refinedContent", "createdAt"]
      },
      "SimpleMessageResponseDto": {
        "type": "object",
        "properties": {
          "message": {
            "type": "string",
            "example": "Operation successful"
          }
        },
        "required": ["message"]
      },
      "ActivityItemDto": {
        "type": "object",
        "properties": {
          "date": {
            "type": "string",
            "example": "2026-01-14"
          },
          "count": {
            "type": "number",
            "example": 5
          },
          "level": {
            "type": "number",
            "example": 3,
            "description": "Activity level (0-4)"
          }
        },
        "required": ["date", "count", "level"]
      },
      "DashboardSummaryDto": {
        "type": "object",
        "properties": {
          "userId": {
            "type": "number",
            "example": 1
          },
          "totalNotes": {
            "type": "number",
            "example": 120
          },
          "currentStreakDays": {
            "type": "number",
            "example": 7
          },
          "thisMonthNotes": {
            "type": "number",
            "example": 15
          },
          "activity": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ActivityItemDto"
            }
          }
        },
        "required": ["userId", "totalNotes", "currentStreakDays", "thisMonthNotes", "activity"]
      },
      "CreateTodoDto": {
        "type": "object",
        "properties": {
          "noteId": {
            "type": "number",
            "example": 1,
            "description": "이 투두를 특정 노트에 연결하려면 이 필드를 입력하세요. 수동으로 생성하려면 비워두세요.",
            "nullable": true
          },
          "content": {
            "type": "string",
            "example": "Review Chapter 1",
            "description": "Content of the todo"
          },
          "dueDate": {
            "type": "string",
            "example": "2026-01-20T00:00:00Z",
            "description": "Due date"
          },
          "reason": {
            "type": "string",
            "example": "Important for exam",
            "description": "Reason for the todo"
          },
          "deadlineType": {
            "type": "string",
            "enum": ["SHORT_TERM", "LONG_TERM"],
            "example": "SHORT_TERM",
            "description": "Deadline type (SHORT_TERM or LONG_TERM)"
          }
        },
        "required": ["content"]
      },
      "UpdateTodoDto": {
        "type": "object",
        "properties": {
          "content": {
            "type": "string",
            "example": "Review Chapter 1",
            "description": "Content of the todo"
          },
          "dueDate": {
            "type": "string",
            "example": "2026-01-20T00:00:00Z",
            "description": "Due date"
          },
          "status": {
            "type": "string",
            "enum": ["PENDING", "COMPLETED"],
            "example": "COMPLETED",
            "description": "Status of the todo"
          },
          "reason": {
            "type": "string",
            "example": "Important for exam",
            "description": "Reason for the todo"
          },
          "deadlineType": {
            "type": "string",
            "enum": ["SHORT_TERM", "LONG_TERM"],
            "example": "SHORT_TERM",
            "description": "Deadline type (SHORT_TERM or LONG_TERM)"
          }
        }
      },
      "SignupDto": {
        "type": "object",
        "properties": {
          "email": {
            "type": "string",
            "example": "test@test.com"
          },
          "password": {
            "type": "string",
            "example": "password123"
          },
          "name": {
            "type": "string",
            "example": "tester"
          }
        },
        "required": ["email", "password", "name"]
      },
      "UserResponseDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "number",
            "example": 1
          },
          "email": {
            "type": "string",
            "example": "test@test.com"
          },
          "name": {
            "type": "string",
            "example": "tester"
          }
        },
        "required": ["id", "email", "name"]
      },
      "LoginDto": {
        "type": "object",
        "properties": {
          "email": {
            "type": "string",
            "example": "test@test.com"
          },
          "password": {
            "type": "string",
            "example": "1234"
          }
        },
        "required": ["email", "password"]
      },
      "LoginResponseDto": {
        "type": "object",
        "properties": {
          "accessToken": {
            "type": "string",
            "example": "jwt-token-example"
          }
        },
        "required": ["accessToken"]
      },
      "MeResponseDto": {
        "type": "object",
        "properties": {
          "message": {
            "type": "string",
            "example": "JWT works"
          },
          "user": {
            "type": "object",
            "example": {
              "userId": 1,
              "email": "test@test.com"
            }
          }
        },
        "required": ["message", "user"]
      }
    }
  }
}
